<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of ode_jumps_new</title>
  <meta name="keywords" content="ode_jumps_new">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">src</a> &gt; <a href="../index.html">solvers</a> &gt; <a href="index.html">Fluid</a> &gt; ode_jumps_new.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for src\solvers\Fluid&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>ode_jumps_new
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function jumps = ode_jumps_new(M, K, match, q_indices, P, Kic, strategy) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="solver_fluid_odes.html" class="code" title="function [ode_h,q_indices] = solver_fluid_odes(N, Mu, Phi, P, S, sched, schedparam)">solver_fluid_odes</a>	Copyright (c) 2012-2019, Imperial College London</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function jumps = ode_jumps_new(M, K, match, q_indices, P, Kic, strategy)</a>
0002 jumps = []; <span class="comment">%returns state changes triggered by all the events</span>
0003 <span class="keyword">for</span> i = 1 : M   <span class="comment">%state changes from departures in service phases 2...</span>
0004     <span class="keyword">for</span> c = 1:K
0005         <span class="keyword">if</span> match(i,c)&gt;0
0006             xic = q_indices(i,c); <span class="comment">% index of  x_ic</span>
0007             <span class="keyword">for</span> j = 1 : M
0008                 <span class="keyword">for</span> l = 1:K
0009                     <span class="keyword">if</span> P((i-1)*K+c,(j-1)*K+l) &gt; 0
0010                         xjl = q_indices(j,l); <span class="comment">% index of x_jl</span>
0011                         <span class="keyword">for</span> k = 1 : Kic(i,c)
0012                             jump = zeros( sum(sum(Kic)), 1 );
0013                             <span class="keyword">switch</span> strategy(i)
0014                                 <span class="keyword">case</span> 0 <span class="comment">%EXT</span>
0015                                     jump(xjl) = jump(xjl) + 1; <span class="comment">%type c job starts in stat j</span>
0016                                     jump(xic+k-1) = jump(xic+k-1) - 1; <span class="comment">%type c in stat i completes service</span>
0017                                     <span class="comment">%                                            jump(xic) = jump(xic) + 1; %type c in stat i completes service</span>
0018                                     jumps = [jumps jump;];
0019                                 <span class="keyword">otherwise</span>
0020                                     jump(xic+k-1) = jump(xic+k-1) - 1; <span class="comment">%type c in stat i completes service</span>
0021                                     jump(xjl) = jump(xjl) + 1; <span class="comment">%type c job starts in stat j</span>
0022                                     jumps = [jumps jump;];
0023                             <span class="keyword">end</span>
0024                         <span class="keyword">end</span>
0025                     <span class="keyword">end</span>
0026                 <span class="keyword">end</span>
0027             <span class="keyword">end</span>
0028         <span class="keyword">end</span>
0029     <span class="keyword">end</span>
0030 <span class="keyword">end</span>
0031 <span class="keyword">for</span> i = 1 : M   <span class="comment">%state changes from &quot;next service phase&quot; transition in phases 2...</span>
0032     <span class="keyword">for</span> c = 1:K
0033         <span class="keyword">if</span> match(i,c)&gt;0
0034             xic = q_indices(i,c);
0035             <span class="keyword">for</span> k = 1 : (Kic(i,c) - 1)
0036                 jump = zeros( sum(sum(Kic)), 1 );
0037                 jump(xic+k-1) = jump(xic+k-1) - 1;
0038                 jump(xic+k) = jump(xic+k) + 1;
0039                 jumps = [jumps jump;];
0040             <span class="keyword">end</span>
0041         <span class="keyword">end</span>
0042     <span class="keyword">end</span>
0043 <span class="keyword">end</span>
0044 <span class="keyword">end</span> <span class="comment">% ode_jumps_new()</span></pre></div>
<hr><address>Generated on Tue 19-Mar-2019 19:15:18 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>