<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of Task</title>
  <meta name="keywords" content="Task">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">src</a> &gt; <a href="index.html">lang</a> &gt; Task.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for src\lang&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>Task
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="LayeredNetworkElement.html" class="code" title="">LayeredNetworkElement</a>	</li><li><a href="Task.html" class="code" title="">Task</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="Task.html" class="code" title="">Task</a>	</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function obj = Task(model, name, multiplicity, scheduling, thinkTime)</a></li><li><a href="#_sub2" class="code">function obj = on(obj, parent)</a></li><li><a href="#_sub3" class="code">function obj = setAsReferenceTask(obj)</a></li><li><a href="#_sub4" class="code">function obj = setThinkTime(obj, thinkTime)</a></li><li><a href="#_sub5" class="code">function obj = addEntry(obj, newEntry)</a></li><li><a href="#_sub6" class="code">function obj = addActivity(obj, newAct)</a></li><li><a href="#_sub7" class="code">function obj = setActivity(obj, newAct, index)</a></li><li><a href="#_sub8" class="code">function obj = removeActivity(obj, index)</a></li><li><a href="#_sub9" class="code">function obj = setInitActivity(obj, initActID)</a></li><li><a href="#_sub10" class="code">function obj = addPrecedence(obj, newPrec)</a></li><li><a href="#_sub11" class="code">function obj = setReplyEntry(obj, newReplyEntry)</a></li><li><a href="#_sub12" class="code">function meanHostDemand = getMeanHostDemand(obj, entryName)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="Task.html" class="code" title="">Task</a> &lt; <a href="LayeredNetworkElement.html" class="code" title="">LayeredNetworkElement</a>
0002     
0003     properties
0004         multiplicity;       <span class="comment">%int</span>
0005         scheduling;         <span class="comment">%string</span>
0006         thinkTime;          <span class="comment">%double</span>
0007         thinkTimeMean;          <span class="comment">%double</span>
0008         thinkTimeSCV;          <span class="comment">%double</span>
0009         entries = [];
0010         activities = Activity.empty();     <span class="comment">%task-activities</span>
0011         initActID = 0;       <span class="comment">%integer that indicates which is the initial activity</span>
0012         precedences = [];
0013         replyEntry;
0014     <span class="keyword">end</span>
0015     
0016     
0017     methods
0018         <span class="comment">%public methods, including constructor</span>
0019         
0020         <span class="comment">%constructor</span>
0021         <a name="_sub0" href="#_subfunctions" class="code">function obj = Task(model, name, multiplicity, scheduling, thinkTime)</a>
0022             <span class="keyword">if</span> ~exist(<span class="string">'name'</span>,<span class="string">'var'</span>)
0023                 error(<span class="string">'Constructor requires to specify at least a name.'</span>);
0024             <span class="keyword">end</span>
0025             obj@<a href="LayeredNetworkElement.html" class="code" title="">LayeredNetworkElement</a>(name);
0026             <span class="keyword">if</span> ~exist(<span class="string">'multiplicity'</span>,<span class="string">'var'</span>)
0027                 multiplicity = 1;
0028             <span class="keyword">end</span>
0029             <span class="keyword">if</span> ~exist(<span class="string">'scheduling'</span>,<span class="string">'var'</span>)
0030                 scheduling = SchedStrategy.INF;
0031             <span class="keyword">end</span>
0032             <span class="keyword">if</span> ~exist(<span class="string">'thinkTime'</span>,<span class="string">'var'</span>)
0033                 thinkTime = NaN;
0034             <span class="keyword">end</span>
0035             obj.multiplicity = multiplicity;
0036             obj.scheduling = scheduling;
0037             <span class="keyword">switch</span> scheduling
0038                 <span class="keyword">case</span> SchedStrategy.REF
0039                     <span class="keyword">if</span> ~isfinite(multiplicity)
0040                         obj.multiplicity = 1;
0041                     <span class="keyword">end</span>
0042                     <span class="keyword">if</span> isnumeric(thinkTime)
0043                         obj.thinkTimeMean = Exp(1/thinkTime);
0044                         obj.thinkTimeMean = thinkTime;
0045                         obj.thinkTimeSCV = 1.0;
0046                     <span class="keyword">elseif</span> isa(thinkTime,<span class="string">'Distrib'</span>)
0047                         obj.thinkTime = thinkTime;
0048                         obj.thinkTimeMean = thinkTime.getMean();
0049                         obj.thinkTimeSCV = thinkTime.getSCV();
0050                     <span class="keyword">end</span>
0051                 <span class="keyword">otherwise</span>
0052                     <span class="keyword">if</span> strcmp(SchedStrategy.INF,scheduling) &amp;&amp; isfinite(multiplicity)
0053                         obj.multiplicity = 1;
0054                     <span class="keyword">end</span>
0055                     
0056                     obj.thinkTime = Exp(Inf);
0057                     obj.thinkTimeMean = 0.0;
0058                     obj.thinkTimeSCV = 0.0;
0059                     <span class="keyword">if</span> thinkTime &gt; 0
0060                         warning(<span class="string">'Cannot specify a think time for a non-reference task, setting it to zero.'</span>);
0061                     <span class="keyword">end</span>
0062             <span class="keyword">end</span>
0063             model.objects.tasks{end+1} = obj;
0064         <span class="keyword">end</span>
0065         
0066         <a name="_sub1" href="#_subfunctions" class="code">function obj = on(obj, parent)</a>
0067             parent.addTask(obj);
0068         <span class="keyword">end</span>
0069         
0070         <a name="_sub2" href="#_subfunctions" class="code">function obj = setAsReferenceTask(obj)</a>
0071             self.scheduling = SchedStrategy.REF;
0072         <span class="keyword">end</span>
0073         
0074         <a name="_sub3" href="#_subfunctions" class="code">function obj = setThinkTime(obj, thinkTime)</a>
0075             <span class="keyword">if</span> isnumeric(thinkTime)
0076                 obj.thinkTimeMean = Exp(1/thinkTime);
0077                 obj.thinkTimeMean = thinkTime;
0078                 obj.thinkTimeSCV = 1.0;
0079             <span class="keyword">elseif</span> isa(thinkTime,<span class="string">'Distrib'</span>)
0080                 obj.thinkTime = thinkTime;
0081                 obj.thinkTimeMean = thinkTime.getMean();
0082                 obj.thinkTimeSCV = thinkTime.getSCV();
0083             <span class="keyword">end</span>
0084         <span class="keyword">end</span>
0085         
0086         <span class="comment">%addEntry</span>
0087         <a name="_sub4" href="#_subfunctions" class="code">function obj = addEntry(obj, newEntry)</a>
0088             <span class="keyword">if</span>(nargin &gt; 1)
0089                 obj.entries = [obj.entries; newEntry];
0090             <span class="keyword">end</span>
0091         <span class="keyword">end</span>
0092         
0093         <span class="comment">%addActivity</span>
0094         <a name="_sub5" href="#_subfunctions" class="code">function obj = addActivity(obj, newAct)</a>
0095             <span class="keyword">if</span>(nargin &gt; 1)
0096                 newAct.setParent(obj.name);
0097                 obj.activities = [obj.activities; newAct];
0098             <span class="keyword">end</span>
0099         <span class="keyword">end</span>
0100         
0101         <span class="comment">%setActivity</span>
0102         <a name="_sub6" href="#_subfunctions" class="code">function obj = setActivity(obj, newAct, index)</a>
0103             <span class="keyword">if</span>(nargin &gt; 2)
0104                 <span class="comment">%if length(obj.activities) &lt; index</span>
0105                 <span class="comment">%    obj.activities = [obj.activities; LayeredNetwork.Activity.empty(index-length(obj.activities),0)];</span>
0106                 <span class="comment">%end</span>
0107                 obj.activities(index,1) = newAct;
0108             <span class="keyword">end</span>
0109         <span class="keyword">end</span>
0110         
0111         <span class="comment">%remove activity</span>
0112         <a name="_sub7" href="#_subfunctions" class="code">function obj = removeActivity(obj, index)</a>
0113             <span class="keyword">if</span>(nargin &gt; 1)
0114                 <span class="keyword">if</span> length(obj.activities) &lt; index
0115                     <span class="comment">% throw exception - attempted to remove unexisting activity</span>
0116                     errID = <span class="string">'LQN:Task:NonExistingActivity'</span>;
0117                     errMsg = <span class="string">'LQN Task %s has %d activities, but activity %d was tried to me removed.'</span>;
0118                     err = MException(errID, errMsg, obj.name, length(obj.activities), index);
0119                     throw(err)
0120                 <span class="keyword">else</span>
0121                     idxToKeep = [1:index-1 index+1:length(obj.activities)];
0122                     obj.activities = obj.activities(idxToKeep);
0123                     obj.actNames = obj.actNames(idxToKeep);
0124                 <span class="keyword">end</span>
0125             <span class="keyword">end</span>
0126         <span class="keyword">end</span>
0127         
0128         <span class="comment">%setInitActivity</span>
0129         <a name="_sub8" href="#_subfunctions" class="code">function obj = setInitActivity(obj, initActID)</a>
0130             <span class="keyword">if</span>(nargin &gt; 1)
0131                 obj.initActID = initActID;
0132             <span class="keyword">end</span>
0133         <span class="keyword">end</span>
0134         
0135         <span class="comment">%set</span>
0136         <a name="_sub9" href="#_subfunctions" class="code">function obj = addPrecedence(obj, newPrec)</a>
0137             <span class="keyword">if</span> iscell(newPrec)
0138                 <span class="keyword">for</span> m=1:length(newPrec)
0139                     obj.precedences = [obj.precedences; newPrec{m}];
0140                 <span class="keyword">end</span>
0141             <span class="keyword">else</span>
0142                 obj.precedences = [obj.precedences; newPrec];
0143             <span class="keyword">end</span>
0144         <span class="keyword">end</span>
0145         
0146         <span class="comment">%setReplyEntry</span>
0147         <a name="_sub10" href="#_subfunctions" class="code">function obj = setReplyEntry(obj, newReplyEntry)</a>
0148             <span class="keyword">if</span>(nargin &gt; 1)
0149                 obj.replyEntry = newReplyEntry;
0150             <span class="keyword">end</span>
0151         <span class="keyword">end</span>
0152         
0153         <a name="_sub11" href="#_subfunctions" class="code">function meanHostDemand = getMeanHostDemand(obj, entryName)</a>
0154             <span class="comment">% determines the demand posed by the entry entryName</span>
0155             <span class="comment">% the demand is located in the activity of the corresponding entry</span>
0156             
0157             meanHostDemand = -1;
0158             <span class="keyword">for</span> j = 1:length(obj.entries)
0159                 <span class="keyword">if</span> strcmp(obj.entries(j).name, entryName)
0160                     meanHostDemand = obj.entries(j).activities(1).hostDemandMean;
0161                     <span class="keyword">break</span>;
0162                 <span class="keyword">end</span>
0163             <span class="keyword">end</span>
0164             
0165         <span class="keyword">end</span>
0166     <span class="keyword">end</span>
0167 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Tue 19-Mar-2019 19:15:18 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>