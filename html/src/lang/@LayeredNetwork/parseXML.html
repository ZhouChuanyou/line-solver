<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of parseXML</title>
  <meta name="keywords" content="parseXML">
  <meta name="description" content="Copyright (c) 2012-2019, Imperial College London">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">src</a> &gt; <a href="../index.html">lang</a> &gt; <a href="index.html">@LayeredNetwork</a> &gt; parseXML.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for src\lang\@LayeredNetwork&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>parseXML
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>Copyright (c) 2012-2019, Imperial College London</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function myLN = parseXML(filename, verbose) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Copyright (c) 2012-2019, Imperial College London
 All rights reserved.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="LayeredNetwork.html" class="code" title="">LayeredNetwork</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="LayeredNetwork.html" class="code" title="">LayeredNetwork</a>	</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function myLN = parseXML(filename, verbose)</a>
0002 <span class="comment">% Copyright (c) 2012-2019, Imperial College London</span>
0003 <span class="comment">% All rights reserved.</span>
0004 
0005 
0006 import javax.xml.parsers.DocumentBuilderFactory;
0007 import javax.xml.parsers.DocumentBuilder;
0008 import org.w3c.dom.Document;
0009 import org.w3c.dom.NodeList;
0010 import org.w3c.dom.Node;
0011 import org.w3c.dom.Element;
0012 import java.io.File;
0013 
0014 import LayeredNetwork.*;
0015 
0016 <span class="comment">% LQN</span>
0017 myLN = <a href="LayeredNetwork.html" class="code" title="">LayeredNetwork</a>(filename);
0018 
0019 <span class="keyword">if</span> nargin == 1
0020     verbose = 0;
0021 <span class="keyword">end</span>
0022 
0023 <span class="comment">% init Java XML parser and load file</span>
0024 dbFactory = DocumentBuilderFactory.newInstance();
0025 dBuilder = dbFactory.newDocumentBuilder();
0026 <span class="keyword">try</span>
0027     doc = dBuilder.parse(filename);
0028 <span class="keyword">catch</span> exception <span class="comment">%java.io.FileNotFoundException</span>
0029     <span class="keyword">if</span> ~exist(filename, <span class="string">'file'</span>)
0030         disp([<span class="string">'Error: Input XML file '</span>, filename, <span class="string">' not found'</span>]);
0031         processors = [];
0032         myLN.objects.processors = processors;
0033         
0034         <span class="keyword">return</span>;
0035     <span class="keyword">else</span>
0036         rethrow(exception);
0037     <span class="keyword">end</span>
0038 <span class="keyword">end</span>
0039 
0040 doc.getDocumentElement().normalize();
0041 <span class="keyword">if</span> verbose &gt; 0
0042     disp([<span class="string">'Parsing LQN file: '</span>, filename] );
0043     disp([<span class="string">'Root element :'</span>, char(doc.getDocumentElement().getNodeName()) ] );
0044 <span class="keyword">end</span>
0045 
0046 <span class="comment">%NodeList</span>
0047 procList = doc.getElementsByTagName(<span class="string">'processor'</span>);
0048 
0049 processors = [];
0050 <span class="comment">%providers = cell(0); % list of entries that provide services - Entry, Task, Proc</span>
0051 requesters = cell(0); <span class="comment">% list of activities that request services - Act, Task, Proc</span>
0052 tasks = cell(0); <span class="comment">%list of tasks - Task, task ID, Proc, ProcID - Row Index as task ID</span>
0053 entries = cell(0); <span class="comment">%list of entries - Entry, Task ID</span>
0054 taskID = 1;
0055 <span class="comment">%demand is always indicated in an entry activity</span>
0056 procID = 1;
0057 actObj = cell(0);
0058 entryObj = cell(0);
0059 taskObj = cell(0);
0060 procObj = cell(0);
0061 
0062 clients = []; <span class="comment">% list of tasks that act as pure clients (think time)</span>
0063 <span class="keyword">for</span> i = 0:procList.getLength()-1
0064     <span class="comment">%Node - Processor</span>
0065     procNode = procList.item(i);
0066     
0067     <span class="keyword">if</span> procNode.getNodeType() == Node.ELEMENT_NODE
0068         
0069         <span class="comment">%Element</span>
0070         procElement = procNode;
0071         name = char(procElement.getAttribute(<span class="string">'name'</span>));
0072         multiplicity = str2num(char(procElement.getAttribute(<span class="string">'multiplicity'</span>)));
0073         scheduling = char(procElement.getAttribute(<span class="string">'scheduling'</span>));
0074         <span class="keyword">switch</span> scheduling
0075             <span class="keyword">case</span> <span class="string">'inf'</span>
0076                 <span class="keyword">if</span> isempty(multiplicity)
0077                     multiplicity = Inf;
0078                     warning(<span class="string">'Missing multiplicity for infinite-server processor, set to default value (Inf).'</span>)
0079                 <span class="keyword">else</span>
0080                     <span class="keyword">if</span> ~isinf(multiplicity)
0081                         multiplicity = Inf;
0082                         warning(<span class="string">'Multiplicity for infinite-server processor is incorrect, set to default value (Inf).'</span>)
0083                     <span class="keyword">end</span>
0084                 <span class="keyword">end</span>
0085             <span class="keyword">otherwise</span>
0086                 <span class="keyword">if</span> isempty(multiplicity)
0087                     multiplicity = 1;
0088                     warning(<span class="string">'No multiplicity specified in processor, assuming default value (1.0).'</span>)
0089                 <span class="keyword">end</span>
0090         <span class="keyword">end</span>
0091         quantum = str2double(char(procElement.getAttribute(<span class="string">'quantum'</span>)));
0092         speedFactor = str2double(char(procElement.getAttribute(<span class="string">'speed-factor'</span>)));
0093         tempProc = Processor(myLN, name, multiplicity, scheduling, quantum, speedFactor);
0094         procObj{end+1} = tempProc;
0095         
0096         taskList = procNode.getElementsByTagName(<span class="string">'task'</span>);
0097         <span class="keyword">for</span> j = 0:taskList.getLength()-1
0098             <span class="comment">%Node - Task</span>
0099             taskNode = taskList.item(j);
0100             <span class="keyword">if</span> taskNode.getNodeType() == Node.ELEMENT_NODE
0101                 <span class="comment">%Element</span>
0102                 taskElement = taskNode;
0103                 name = char(taskElement.getAttribute(<span class="string">'name'</span>));
0104                 multiplicity = str2num(char(taskElement.getAttribute(<span class="string">'multiplicity'</span>)));
0105                 <span class="comment">% map XML notation for scheduling into LINE scheduling strategy</span>
0106                 scheduling = char(taskElement.getAttribute(<span class="string">'scheduling'</span>)); <span class="comment">% this assumes that SchedStrategy uses the same property strings as the XML</span>
0107                 <span class="keyword">switch</span> scheduling
0108                     <span class="keyword">case</span> <span class="string">'inf'</span>
0109                         <span class="keyword">if</span> isempty(multiplicity)
0110                             multiplicity = Inf;
0111                             warning(<span class="string">'No multiplicity specified in infinite-server task, assuming default value (Inf).'</span>)
0112                         <span class="keyword">else</span>
0113                             <span class="keyword">if</span> ~isinf(multiplicity)
0114                                 multiplicity = Inf;
0115                                 warning(<span class="string">'Incorrect multiplicity specified in infinite-server task, assuming default value (Inf).'</span>)
0116                             <span class="keyword">end</span>
0117                         <span class="keyword">end</span>
0118                     <span class="keyword">otherwise</span>
0119                         <span class="keyword">if</span> isempty(multiplicity)
0120                             multiplicity = 1;
0121                             warning(<span class="string">'No multiplicity specified in task, assuming default value (1.0).'</span>)
0122                         <span class="keyword">end</span>
0123                 <span class="keyword">end</span>
0124                 thinkTime = str2double(char(taskElement.getAttribute(<span class="string">'think-time'</span>)));
0125                 <span class="comment">% check if attribute is specified as thinkTime instead of</span>
0126                 <span class="comment">% think-time, as in the LQXO format</span>
0127                 <span class="keyword">if</span> isnan(thinkTime)
0128                     thinkTime = str2double(char(taskElement.getAttribute(<span class="string">'thinkTime'</span>)));
0129                 <span class="keyword">end</span>
0130                 actGraph = char(taskElement.getAttribute(<span class="string">'activity-graph'</span>));
0131                 tempTask = Task(myLN, name, multiplicity, scheduling, thinkTime);
0132                 taskObj{end+1} = tempTask;
0133                 <span class="comment">% determine reference task</span>
0134                 <span class="keyword">if</span> strcmp(tempTask.scheduling, <span class="string">'ref'</span>)
0135                     <span class="keyword">if</span> thinkTime &gt; 0
0136                         clients = [clients; taskID];
0137                     <span class="keyword">else</span>
0138                         err = MException(<span class="string">'ParseLQNXML:ZeroThinkTime'</span>, <span class="keyword">...</span>
0139                             [<span class="string">'The think time specified in '</span>, tempProc.name, <span class="string">' is zero.\nThink time must be a positive real'</span>]);
0140                         throw(err);
0141                         
0142                     <span class="keyword">end</span>
0143                 <span class="keyword">end</span>
0144                 
0145                 entryList = taskNode.getElementsByTagName(<span class="string">'entry'</span>);
0146                 <span class="keyword">for</span> k = 0:entryList.getLength()-1
0147                     <span class="comment">%Node - Task</span>
0148                     entryNode = entryList.item(k);
0149                     <span class="keyword">if</span> entryNode.getNodeType() == Node.ELEMENT_NODE
0150                         <span class="comment">%Element</span>
0151                         entryElement = entryNode;
0152                         ename = char(entryElement.getAttribute(<span class="string">'name'</span>));
0153                         type = char(entryElement.getAttribute(<span class="string">'type'</span>));
0154                         tempEntry = Entry(myLN, ename, type);
0155                         entryObj{end+1} = tempEntry;
0156                         actList = entryNode.getElementsByTagName(<span class="string">'activity'</span>);
0157                         <span class="keyword">for</span> l = 0:actList.getLength()-1
0158                             <span class="comment">%Node - Task</span>
0159                             actNode = actList.item(l);
0160                             <span class="keyword">if</span> actNode.getNodeType() == Node.ELEMENT_NODE
0161                                 <span class="comment">%Element</span>
0162                                 actElement = actNode;
0163                                 name = char(actElement.getAttribute(<span class="string">'name'</span>));
0164                                 phase = str2num(char(actElement.getAttribute(<span class="string">'phase'</span>)));
0165                                 demandMean = str2double(char(actElement.getAttribute(<span class="string">'host-demand-mean'</span>)));
0166                                 boundEntry = char(actElement.getAttribute(<span class="string">'bound-to-entry'</span>));
0167                                 <span class="keyword">if</span> isempty(boundEntry) &amp;&amp; actList.getLength()==1 <span class="comment">% if there is no bound to entry and there is a single activity, set it to be the one bound to entry</span>
0168                                     boundEntry = tempEntry.name;
0169                                 <span class="keyword">end</span>
0170                                 tempAct = Activity(myLN, name, demandMean, boundEntry, phase);
0171                                 actObj{end+1} = tempAct;
0172                                 <span class="comment">%providers{size(providers,1)+1,1} = tempAct.name;</span>
0173                                 <span class="comment">%providers{size(providers,1),2} = tempEntry.name;</span>
0174                                 <span class="comment">%providers{size(providers,1),3} = tempTask.name;</span>
0175                                 <span class="comment">%providers{size(providers,1),4} = tempProc.name;</span>
0176                                 <span class="comment">%providers{size(providers,1),5} = procID;</span>
0177                                 
0178                                 <span class="comment">%providers:</span>
0179                                 <span class="comment">% activity - entry - task - processor</span>
0180                                 
0181                                 <span class="comment">%actual processors</span>
0182                                 <span class="comment">%if demandMean &gt; 0 &amp;&amp; isempty(find(cell2mat( {physical{:,2}}) == procID))</span>
0183                                 tempEntry = tempEntry.addActivity(tempAct);
0184                                 actObj{end+1} = tempAct;
0185                             <span class="keyword">end</span>
0186                         <span class="keyword">end</span>
0187                         
0188                         entries{size(entries,1)+1,1} = tempEntry.name;
0189                         entries{size(entries,1),2} = taskID;
0190                         tempTask = tempTask.addEntry(tempEntry);
0191                     <span class="keyword">end</span>
0192                 <span class="keyword">end</span>
0193                 
0194                 <span class="comment">%% task-activities</span>
0195                 <span class="keyword">if</span> taskElement.getElementsByTagName(<span class="string">'task-activities'</span>).getLength &gt; 0
0196                     actNames = cell(0); iterActNames = 1;
0197                     <span class="comment">%actCalls = cell(0);</span>
0198                     actList = taskElement.getElementsByTagName(<span class="string">'task-activities'</span>).item(0).getElementsByTagName(<span class="string">'activity'</span>);
0199                     <span class="keyword">for</span> l = 0:actList.getLength()-1
0200                         <span class="comment">%Node - Task</span>
0201                         actNode = actList.item(l);
0202                         <span class="keyword">if</span> actNode.getNodeType() == Node.ELEMENT_NODE &amp;&amp; strcmp(char(actNode.getParentNode().getNodeName()),<span class="string">'task-activities'</span>)
0203                             <span class="comment">%Element</span>
0204                             actElement = actNode;
0205                             name = char(actElement.getAttribute(<span class="string">'name'</span>));
0206                             phase = str2num(char(actElement.getAttribute(<span class="string">'phase'</span>)));
0207                             demandMean = str2double(char(actElement.getAttribute(<span class="string">'host-demand-mean'</span>)));
0208                             boundEntry = char(actElement.getAttribute(<span class="string">'bound-to-entry'</span>));
0209                             tempAct = Activity(myLN, name, demandMean, boundEntry, phase);
0210                             tempAct.setParent(tempTask.name);
0211                             actNames{iterActNames,1} = name;
0212                             <span class="keyword">if</span> ~isempty(boundEntry)
0213                                 tempTask = tempTask.setInitActivity(iterActNames);
0214                             <span class="keyword">end</span>
0215                             
0216                             synchCalls = actElement.getElementsByTagName(<span class="string">'synch-call'</span>);
0217                             asynchCalls = actElement.getElementsByTagName(<span class="string">'asynch-call'</span>);
0218                             <span class="comment">%add synch calls if any</span>
0219                             <span class="keyword">if</span> synchCalls.getLength() &gt; 0
0220                                 <span class="keyword">for</span> m = 0:synchCalls.getLength()-1
0221                                     callElement = synchCalls.item(m);
0222                                     dest = char(callElement.getAttribute(<span class="string">'dest'</span>));
0223                                     mean = str2double(char(callElement.getAttribute(<span class="string">'calls-mean'</span>)));
0224                                     tempAct = tempAct.synchCall(dest,mean);
0225                                     <span class="comment">%actCalls{iterActNames,1} = dest;</span>
0226                                     requesters{size(requesters,1)+1,1} = tempAct.name;
0227                                     requesters{size(requesters,1),2} = taskID;
0228                                     requesters{size(requesters,1),3} = tempProc.name;
0229                                     requesters{size(requesters,1),4} = dest;
0230                                     requesters{size(requesters,1),5} = procID;
0231                                     <span class="comment">%requesters:</span>
0232                                     <span class="comment">% activity - task - processor - dest (entry) - procID</span>
0233                                 <span class="keyword">end</span>
0234                                 <span class="comment">%else</span>
0235                                 <span class="comment">%    actCalls{iterActNames,1} = [];</span>
0236                                 <span class="comment">%end</span>
0237                                 <span class="comment">%iterActNames = iterActNames + 1;</span>
0238                                 <span class="comment">%add asynch calls if any</span>
0239                             <span class="keyword">elseif</span> asynchCalls.getLength() &gt; 0
0240                                 <span class="keyword">for</span> m = 0:asynchCalls.getLength()-1
0241                                     callElement = asynchCalls.item(m);
0242                                     dest = char(callElement.getAttribute(<span class="string">'dest'</span>));
0243                                     mean = str2double(char(callElement.getAttribute(<span class="string">'calls-mean'</span>)));
0244                                     tempAct = tempAct.asynchCall(dest,mean);
0245                                     <span class="comment">%actCalls{iterActNames,1} = dest;</span>
0246                                     requesters{size(requesters,1)+1,1} = tempAct.name;
0247                                     requesters{size(requesters,1),2} = taskID;
0248                                     requesters{size(requesters,1),3} = tempProc.name;
0249                                     requesters{size(requesters,1),4} = dest;
0250                                     requesters{size(requesters,1),5} = procID;
0251                                 <span class="keyword">end</span>
0252                             <span class="keyword">else</span>
0253                                 <span class="comment">%actCalls{iterActNames,1} = [];</span>
0254                             <span class="keyword">end</span>
0255                             iterActNames = iterActNames + 1;
0256                             tempTask = tempTask.addActivity(tempAct);
0257                             actObj{end+1} = tempAct;
0258                         <span class="keyword">end</span>
0259                     <span class="keyword">end</span>
0260                     
0261                     <span class="comment">%reply-entry</span>
0262                     replyNames = cell(0); 
0263                     replyCalls = cell(0);
0264                     replyList = taskElement.getElementsByTagName(<span class="string">'task-activities'</span>).item(0).getElementsByTagName(<span class="string">'reply-entry'</span>);
0265                     <span class="keyword">for</span> l = 0:replyList.getLength()-1
0266                         <span class="comment">%Node - Task</span>
0267                         replyNode = replyList.item(l);
0268                         <span class="keyword">if</span> replyNode.getNodeType() == Node.ELEMENT_NODE &amp;&amp; strcmp(char(replyNode.getParentNode().getNodeName()),<span class="string">'task-activities'</span>)
0269                             <span class="comment">%Element</span>
0270                             replyElement = replyNode;
0271                             entryReplyName = char(replyElement.getAttribute(<span class="string">'name'</span>));
0272                             replyAct = replyElement.getElementsByTagName(<span class="string">'reply-activity'</span>);
0273                             <span class="keyword">if</span> replyAct.getLength() &gt; 0
0274                                 <span class="keyword">for</span> m = 0:replyAct.getLength()-1
0275                                     callElement = replyAct.item(m);
0276                                     actReplyName = char(callElement.getAttribute(<span class="string">'name'</span>));
0277                                     eReplyIdx = find(cellfun(@(x) strcmp(x.name, entryReplyName), entryObj));
0278                                     entryObj{eReplyIdx}.replyActivity{end+1} = actReplyName;
0279                                 <span class="keyword">end</span>
0280                             <span class="keyword">end</span>
0281                         <span class="keyword">end</span>
0282                     <span class="keyword">end</span>                    
0283 
0284                     <span class="comment">%precedences</span>
0285                     precList = taskElement.getElementsByTagName(<span class="string">'task-activities'</span>).item(0).getElementsByTagName(<span class="string">'precedence'</span>);
0286                     actGraph = zeros(length(actNames));
0287                     <span class="keyword">for</span> l = 0:precList.getLength()-1
0288                         <span class="comment">%Node - Precedence</span>
0289                         precNode = precList.item(l);
0290                         <span class="keyword">if</span> precNode.getNodeType() == Node.ELEMENT_NODE
0291                             <span class="comment">%Element</span>
0292                             precElement = precNode;
0293                             
0294                             
0295                             <span class="comment">%pre</span>
0296                             presList = precElement.getElementsByTagName(<span class="string">'pre'</span>);
0297                             <span class="keyword">if</span> presList.getLength &gt; 0
0298                                 pres = cell(1);
0299                                 pres{1} = char(presList.item(0).getElementsByTagName(<span class="string">'activity'</span>).item(0).getAttribute(<span class="string">'name'</span>));
0300                                 preType = <span class="string">'single'</span>;
0301                                 
0302                                 preIdxs = findstring(actNames,pres{1});
0303                             <span class="keyword">else</span>
0304                                 presList = precElement.getElementsByTagName(<span class="string">'pre-OR'</span>).item(0).getElementsByTagName(<span class="string">'activity'</span>);
0305                                 pres = cell(presList.getLength,1);
0306                                 preIdxs = zeros(presList.getLength,1);
0307                                 <span class="keyword">for</span> m = 1:presList.getLength
0308                                     pres{m} = char(presList.item(m-1).getAttribute(<span class="string">'name'</span>));
0309                                     preIdxs(m) = findstring(actNames,pres{m});
0310                                 <span class="keyword">end</span>
0311                                 preType = <span class="string">'OR'</span>;
0312                             <span class="keyword">end</span>
0313                             
0314                             <span class="comment">%post</span>
0315                             postsList = precElement.getElementsByTagName(<span class="string">'post'</span>);
0316                             <span class="keyword">if</span> postsList.getLength &gt; 0
0317                                 posts = cell(1);
0318                                 postProbs = [];
0319                                 posts{1} = char(postsList.item(0).getElementsByTagName(<span class="string">'activity'</span>).item(0).getAttribute(<span class="string">'name'</span>));
0320                                 postType = <span class="string">'single'</span>;
0321                                 postIdxs = findstring(actNames,posts{1});
0322                             <span class="keyword">else</span>
0323                                 postsListOR = precElement.getElementsByTagName(<span class="string">'post-OR'</span>);
0324                                 <span class="keyword">if</span> postsListOR.getLength &gt;0
0325                                     postsList = postsListOR.item(0).getElementsByTagName(<span class="string">'activity'</span>);
0326                                     posts = cell(postsList.getLength,1);
0327                                     postProbs = zeros(postsList.getLength,1);
0328                                     postIdxs = zeros(postsList.getLength,1);
0329                                     <span class="keyword">for</span> m = 1:postsList.getLength
0330                                         posts{m} = char(postsList.item(m-1).getAttribute(<span class="string">'name'</span>));
0331                                         postProbs(m) = str2double( char(postsList.item(m-1).getAttribute(<span class="string">'prob'</span>)) );
0332                                         postIdxs(m) = findstring(actNames,posts{m});
0333                                     <span class="keyword">end</span>
0334                                     postType = <span class="string">'OR'</span>;
0335                                 <span class="keyword">end</span>
0336                                 postsListAND = precElement.getElementsByTagName(<span class="string">'post-AND'</span>);
0337                                 <span class="keyword">if</span> postsListAND.getLength &gt;0
0338                                     postsList = postsListAND.item(0).getElementsByTagName(<span class="string">'activity'</span>);
0339                                     posts = cell(postsList.getLength,1);
0340                                     postProbs = zeros(postsList.getLength,1);
0341                                     postIdxs = zeros(postsList.getLength,1);
0342                                     <span class="keyword">for</span> m = 1:postsList.getLength
0343                                         posts{m} = char(postsList.item(m-1).getAttribute(<span class="string">'name'</span>));
0344                                         postProbs(m) = str2double( char(postsList.item(m-1).getAttribute(<span class="string">'prob'</span>)) );
0345                                         postIdxs(m) = findstring(actNames,posts{m});
0346                                     <span class="keyword">end</span>
0347                                     postType = <span class="string">'AND'</span>;
0348                                 <span class="keyword">end</span>
0349                             <span class="keyword">end</span>
0350                             tempPrec = ActivityPrecedence(pres, posts, preType, postType, postProbs);
0351                             tempTask = tempTask.addPrecedence(tempPrec);
0352                              
0353 <span class="comment">%                             if length(postIdxs) == 1</span>
0354 <span class="comment">%                                 for kIn = preIdxs</span>
0355 <span class="comment">%                                     actGraph(kIn,postIdxs) = 1;</span>
0356 <span class="comment">%                                 end</span>
0357 <span class="comment">%                             else</span>
0358 <span class="comment">%                                 for kOut = 1:length(postIdxs)</span>
0359 <span class="comment">%                                     actGraph(preIdxs, postIdxs(kOut)) = postProbs(kOut);</span>
0360 <span class="comment">%                                 end</span>
0361 <span class="comment">%                             end</span>
0362                         <span class="keyword">end</span>
0363                     <span class="keyword">end</span>
0364 <span class="comment">%                    tempTask = tempTask.setActGraph(actGraph,actNames);</span>
0365                 <span class="keyword">end</span>
0366                 
0367                 tasks{size(tasks,1)+1,1} = tempTask.name;
0368                 tasks{size(tasks,1),2} = taskID;
0369                 tass{size(tasks,1),3} = tempProc.name;
0370                 tasks{size(tasks,1),4} = procID;
0371                 tempProc = tempProc.addTask(tempTask);
0372                 taskID = taskID + 1;
0373                 procID = procID + 1;
0374             <span class="keyword">end</span>
0375         <span class="keyword">end</span>
0376         
0377         processors = [processors; tempProc];
0378     <span class="keyword">end</span>
0379 <span class="keyword">end</span>
0380 
0381 myLN.processors = processors;
0382 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Tue 19-Mar-2019 14:07:48 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>