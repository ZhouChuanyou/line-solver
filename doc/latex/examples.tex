%In this chapter, we report code of the \textsc{Line} examples under the \texttt{examples} folder and their outputs.
In this appendix, we summarize the features demonstrated in the \textsc{Line} scripts that are available under the \texttt{examples} folder.

{
\begin{table}[thbp]
\footnotesize
\renewcommand{\arraystretch}{1.2}
\centering
\caption{Examples}
\begin{tabular}{|l|l|}
\hline
\textbf{Example} & \textbf{Problem}\\
\hline
\texttt{example\_cdfRespT\_1} &  Station response time distribution in a single-class single-job closed network\\
\texttt{example\_cdfRespT\_2} &  Station response time distribution in a multi-chain closed network\\
\texttt{example\_cdfRespT\_3} &  Station response time distribution in a multi-chain open network\\
\texttt{example\_cdfRespT\_4} &  Simulation-based station response time distribution analysis\\
\texttt{example\_cdfRespT\_5} &  Station response time distribution under increasing job populations\\
\hline
\texttt{example\_closedModel\_1} &  Solving a single-class exponential closed queueing network\\
\texttt{example\_closedModel\_2} &  Solving a closed queueing network with a multi-class FCFS station\\
\texttt{example\_closedModel\_3} &  Solving exactly a multi-chain product-form closed queueing network\\
\texttt{example\_closedModel\_4} &  Local state space generation for a station in a closed network\\
\texttt{example\_closedModel\_5} &  1-line exact MVA solution of a cyclic network of PS and INF stations\\
\texttt{example\_closedModel\_6} &  Closed network with round robin scheduling\\
\hline
\texttt{example\_initState\_1} &  Specifying an initial state and prior in a single class model.\\
\texttt{example\_initState\_2} &  Specifying an initial state and prior in a multiclass model.\\
\hline
\texttt{example\_layeredModel\_1} & Analyze a layered network specified in a LQNS XML file \\
\texttt{example\_layeredModel\_2} & Specifying and solving a basic layered network\\
\hline
\texttt{example\_misc\_1} &  Use of performance indexes handles\\
\texttt{example\_misc\_2} &  Update and refresh of service times\\
\texttt{example\_misc\_3} &  Parameterization of a discriminatory processor sharing (DPS) station\\
\texttt{example\_misc\_4} &  Automatic detection of solvers that cannot analyze the model\\
\hline
\texttt{example\_mixedModel\_1} & Solving a queueing network model with both closed and open classes \\
\hline
\texttt{example\_openModel\_1} & Solving a queueing network model with open classes, scalar cutoff options \\
\texttt{example\_openModel\_2} & 1-line solution of a tandem network of PS and INF stations\\
\texttt{example\_openModel\_3} & Solving a queueing network model with open classes, matrix cutoff options \\
\texttt{example\_openModel\_4} & Trace-driven simulation of an M/M/1 queue\\
\hline
\texttt{example\_randomEnvironment\_1} &  Solving a model in a 2-stage random environment \\
\texttt{example\_randomEnvironment\_2} &  Solving a model in a 4-stage random environment \\
\hline
\texttt{example\_stateProbabilities\_1} &  Computing marginal state probabilities for a node\\
\texttt{example\_stateProbabilities\_2} &  Computing marginal state probabilities for a node under class-switching\\
\texttt{example\_stateProbabilities\_3} &  Computing joint state probabilities for the system\\
\hline
\end{tabular}
\label{TAB_examples_closedModel}
\end{table}
}

%\subsection{\texttt{example\_closedModel\_1.m}}
%\paragraph{Code.} This example illustrates the definition in \textsc{Line} of a single-class closed queueing network with two nodes,a  delay and a processor sharing queue, and probabilistic routing. All available \textsc{Line} solvers are instantiated and run on the model.
%%\lstinputlisting[language=matlab,numbers=left,linerange=1-27]{examples/example_closedModel_1.m}
%
%\lstset{
%    language=matlab,
%    tabsize=3,
%    frame=single,
%    basicstyle=\ttfamily\scriptsize,
%    %caption=Test,
%    label=code:sample,
%    frame=shadowbox,
%    rulesepcolor=\color{gray},
%    xleftmargin=20pt,
%    framexleftmargin=15pt,
%    keywordstyle=\color{black},
%    commentstyle=\color{magenta},
%    stringstyle=\color{red},
%    %numbers=left,
%    %numberstyle=\tiny,
%    %numbersep=5pt,
%    aboveskip=10pt,
%    breaklines=true,
%    showstringspaces=false,
%    emph={environment,stage,envParameter,coxDistribution,coxParameter},
%    emphstyle={\color{blue}}}
%
%\begin{lstlisting}
%clear;
%model = Network('model');
%
%node{1} = Delay(model, 'Delay');
%node{2} = Queue(model, 'Queue1', SchedStrategy.PS);
%jobclass{1} = ClosedClass(model, 'Class1', 5, node{1}, 0);
%
%node{1}.setService(jobclass{1}, Exp.fitMeanAndSCV(1.0)); % mean = 1
%node{2}.setService(jobclass{1}, Exp.fitMeanAndSCV(2.0)); % mean = 2
%
%model.addLink(node{1}, node{1});
%model.addLink(node{1}, node{2});
%model.addLink(node{2}, node{1});
%model.addLink(node{2}, node{2});
%
%node{1}.setProbRouting(jobclass{1}, node{1}, 0.7)
%node{1}.setProbRouting(jobclass{1}, node{2}, 0.3)
%node{2}.setProbRouting(jobclass{1}, node{1}, 1.0)
%
%solver = {};
%solver{end+1} = SolverCTMC(model);
%solver{end+1} = SolverJMT(model);
%solver{end+1} = SolverSSA(model);
%solver{end+1} = SolverFluid(model);
%solver{end+1} = SolverMVA(model);
%solver{end+1} = SolverNC(model);
%for s=1:length(solver)
%    fprintf(1,'SOLVER: %s\n',solver{s}.getName());
%    AvgTable = solver{s}.getAvgTable()
%end
%\end{lstlisting}
%
%\paragraph{Output.} The output of the previous script is as follows. Small approximation errors and simulation sampling error are responsible from small deviations from the exact values, which are those reported by the CTMC solver. The error of the simulation solvers (JMT, SSA) can be increase with larger \texttt{options.samples} values.
%
%\begin{lstlisting}
%SOLVER: SolverCTMC
%AvgTable =
%  2x6 table
%    Station         Class          QLen      Util      RespT      Tput
%    ________    ______________    ______    _______    ______    ______
%    'Delay'     'Class1'    1.6327     1.6327         1    1.6327
%    'Queue1'    'Class1'    3.3673    0.97961    6.8748    0.4898
%SOLVER: SolverJMT
%AvgTable =
%  2x6 table
%    Station         Class          QLen      Util      RespT      Tput
%    ________    ______________    ______    _______    ______    _______
%    'Delay'     'Class1'    1.5491     1.5491    1.0042     1.6093
%    'Queue1'    'Class1'      3.39    0.98315     6.967    0.48154
%SOLVER: SolverSSA
%AvgTable =
%  2x6 table
%    Station         Class          QLen      Util      RespT      Tput
%    ________    ______________    ______    _______    ______    _______
%    'Delay'     'Class1'    1.6309     1.6309         1     1.6309
%    'Queue1'    'Class1'    3.3691    0.97853    6.8694    0.49045
%SOLVER: SolverFluid
%AvgTable =
%  2x6 table
%    Station      Class       QLen      Util     RespT      Tput
%    ________    ________    ______    ______    ______    ______
%    'Delay'     'Class1'    1.6667    1.6667         1    1.6667
%    'Queue1'    'Class1'    3.3333         1    6.6667       0.5
%SOLVER: SolverMVA
%AvgTable =
%  2x6 table
%    Station         Class          QLen      Util      RespT      Tput
%    ________    ______________    ______    _______    ______    _______
%    'Delay'     'Class1'    1.5314     1.5314         1     1.5314
%    'Queue1'    'Class1'    3.4686    0.91886    7.5497    0.45943
%SOLVER: SolverNC
%AvgTable =
%  2x6 table
%    Station         Class          QLen      Util      RespT      Tput
%    ________    ______________    ______    _______    ______    ______
%    'Delay'     'Class1'    1.6327     1.6327         1    1.6327
%    'Queue1'    'Class1'    3.3673    0.97961    6.8748    0.4898
%\end{lstlisting}
%
%\subsection{\texttt{example\_closedModel\_2.m}}
%\paragraph{Code.}  This model shows an example of 2-class, 1-chain, closed queueing network with non-exponential service processes.
%\begin{lstlisting}
%model = Network('model');
%
%node{1} = Delay(model, 'Delay');
%node{2} = Queue(model, 'Queue1', SchedStrategy.FCFS);
%node{2}.setNumServers(2);
%
%jobclass{1} = ClosedClass(model, 'Class1', 2, node{1}, 0);
%jobclass{2} = ClosedClass(model, 'Class2', 2, node{1}, 0);
%
%node{1}.setService(jobclass{1}, Erlang(3,2));
%node{1}.setService(jobclass{2}, HyperExp(0.5,3.0,10.0));
%
%node{2}.setService(jobclass{1}, HyperExp(0.1,1.0,10.0));
%node{2}.setService(jobclass{2}, Exp(1));
%
%M = model.getNumberOfStations();
%K = model.getNumberOfClasses();
%
%P = cell(K,K);
%P{1,1} = [0.3,0.1; 0.2,0];
%P{1,2} = [0.6,0; 0.8,0];
%P{2,2} = [0,1; 0,0];
%P{2,1} = [0,0; 1,0];
%
%model.link(P);
%
%options = Solver.defaultOptions;
%options.keep=true;
%options.verbose=1;
%options.samples=5e3;
%
%solver={};
%solver{end+1} = SolverCTMC(model,options);
%solver{end+1} = SolverJMT(model,options);
%solver{end+1} = SolverSSA(model,options);
%solver{end+1} = SolverFluid(model,options);
%solver{end+1} = SolverMVA(model,options);
%solver{end+1} = SolverNC(model,options);
%for s=1:length(solver)
%    fprintf(1,'SOLVER: %s\n',solver{s}.getName());
%    AvgTable = solver{s}.getAvgTable()
%end
%\end{lstlisting}
%\paragraph{Output.}
%\begin{lstlisting}
%SOLVER: SolverCTMC
%CTMC generator and state space saved in: C:\X\AppData\Local\Temp\tp49e94d44_0a44_4d6f_ac03_68e9bb550698.mat
%CTMC analysis completed in 0.940576 sec
%AvgTable =
%  4x6 table
%    Station         Class          QLen        Util       RespT      Tput
%    ________    ______________    _______    ________    _______    _______
%    'Delay'     'Class1'     1.5404      1.5404    0.66667     2.3107
%    'Delay'     'Class2'    0.34044     0.34044    0.21667     1.5712
%    'Queue1'    'Class1'    0.11129    0.021951    0.48165    0.23107
%    'Queue1'    'Class2'     2.0078     0.78562     1.2779     1.5712
%SOLVER: SolverJMT
%JMT Model: C:\X\AppData\Local\Temp\jsimg\tpf370d5af_7e96_4aca_bf73_0cf3c496ad2c.jsimg
%JMT Command: java -cp "C:\X\Dropbox\code\line-solver.git\bin\line\src\solvers\JMT\JMT.jar" jmt.commandline.Jmt sim "C:\X\AppData\Local\Temp\jsimg\tpf370d5af_7e96_4aca_bf73_0cf3c496ad2c.jsimg" -seed 23000 --illegal-access=permit
%JMT analysis completed in 17.300090 sec
%AvgTable =
%  4x6 table
%    Station         Class          QLen        Util       RespT      Tput
%    ________    ______________    _______    ________    _______    _______
%    'Delay'     'Class1'     1.6167      1.6167    0.65263     2.3886
%    'Delay'     'Class2'     0.3398      0.3398     0.2185     1.6104
%    'Queue1'    'Class1'    0.10854    0.018798    0.47573    0.23014
%    'Queue1'    'Class2'     1.9709     0.79182     1.2305     1.6049
%SOLVER: SolverSSA
%SSA samples:   5000
%SSA analysis completed in 19.095364 sec
%AvgTable =
%  4x6 table
%    Station         Class          QLen        Util       RespT      Tput
%    ________    ______________    _______    ________    _______    ______
%    'Delay'     'Class1'     1.5162      1.5162    0.64725    2.3425
%    'Delay'     'Class2'    0.32429     0.32429     0.2142     1.514
%    'Queue1'    'Class1'    0.09591    0.022254     0.4954    0.1936
%    'Queue1'    'Class2'     2.0636     0.75698     1.2922     1.597
%SOLVER: SolverFluid
%Fluid analysis completed in 0.144978 sec [21 iterations]
%AvgTable =
%  4x6 table
%    Station         Class           QLen        Util       RespT      Tput
%    ________    ______________    ________    ________    _______    _______
%    'Delay'     'Class1'      1.7625      1.7625    0.66667     2.6438
%    'Delay'     'Class2'     0.38951     0.38951    0.21667     1.7978
%    'Queue1'    'Class1'    0.050231    0.025116       0.19    0.26438
%    'Queue1'    'Class2'      1.7978     0.89888          1     1.7978
%SOLVER: SolverMVA
%MVA analysis completed in 0.051836 sec
%AvgTable =
%  4x6 table
%    Station         Class           QLen        Util       RespT      Tput
%    ________    ______________    ________    ________    _______    _______
%    'Delay'     'Class1'      1.5557      1.5557    0.66667     2.3336
%    'Delay'     'Class2'     0.34382     0.34382    0.21667     1.5868
%    'Queue1'    'Class1'    0.057094    0.022169    0.24466    0.23336
%    'Queue1'    'Class2'      2.0434     0.79342     1.2877     1.5868
%SOLVER: SolverNC
%NC analysis completed in 0.002516 sec
%AvgTable =
%  4x6 table
%    Station      Class        QLen       Util       RespT      Tput
%    ________    _________    _______    _______    _______    _______
%    'Delay'     'Class1'     1.0825     1.0825    0.66667     1.6237
%    'Delay'     'Class2'    0.23922    0.23922    0.21667     1.1041
%    'Queue1'    'Class1'    0.34337    0.12016     2.1148    0.16237
%    'Queue1'    'Class2'     2.3349    0.81706     2.1148     1.1041
%\end{lstlisting}
%
%\subsection{\texttt{example\_closedModel\_3.m}}
%\paragraph{Code.} This model shows an example of 3-class, 2-chain, closed queueing network with non-exponential service processes.
%\begin{lstlisting}
%model = Network('model');
%
%node{1} = Delay(model, 'Delay');
%node{2} = Queue(model, 'Queue1', SchedStrategy.PS);
%
%jobclass{1} = ClosedClass(model, 'Class1', 2, node{1}, 0);
%jobclass{2} = ClosedClass(model, 'Class2', 0, node{1}, 0);
%jobclass{3} = ClosedClass(model, 'Class3', 1, node{1}, 0);
%
%node{1}.setService(jobclass{1}, Erlang(3,2));
%node{1}.setService(jobclass{2}, HyperExp(0.5,3.0,10.0));
%node{1}.setService(jobclass{3}, Exp(1));
%
%node{2}.setService(jobclass{1}, HyperExp(0.1,1.0,10.0));
%node{2}.setService(jobclass{2}, Exp(2));
%node{2}.setService(jobclass{3}, Exp(3));
%
%M = model.getNumberOfStations();
%K = model.getNumberOfClasses();
%
%P = cell(K,K);
%
%P{1,1} = [0.3,0.1; 0.2,0];
%P{1,2} = [0.6,0; 0.8,0];
%P{1,3} = zeros(M);
%
%P{2,1} = [0,0; 1,0];
%P{2,2} = [0,1; 0,0];
%P{2,3} = zeros(M);
%
%P{3,1} = zeros(M);
%P{3,2} = zeros(M);
%P{3,3} = circul(M);
%
%model.link(P);
%
%options = Solver.defaultOptions;
%options.keep=true;
%options.verbose=1;
%
%solver={};
%solver{end+1} = SolverCTMC(model,options);
%solver{end+1} = SolverFluid(model,options);
%solver{end+1} = SolverMVA(model,options);
%solver{end+1} = SolverNC(model,options);
%for s=1:length(solver)
%    fprintf(1,'SOLVER: %s\n',solver{s}.getName());
%    AvgTable = solver{s}.getAvgTable()
%    AvgChainTable = solver{s}.getAvgChainTable()
%    AvgSysChainTable = solver{s}.getAvgSysTable()
%end
%\end{lstlisting}
%\paragraph{Output.} This is the output on screen of this example.
%\begin{lstlisting}
%SOLVER: SolverCTMC
%CTMC generator and state space saved in: C:\X\AppData\Local\Temp\tpafad0e65_193e_4a46_a779_b2ac27a9f97f.mat
%CTMC analysis completed in 0.168026 sec
%AvgTable =
%  6x6 table
%    Station         Class     QLen        Util       RespT      Tput
%    ________    _________    ________    ________    _______    _______
%    'Delay'     'Class1'     0.94598     0.94598    0.66667      1.419
%    'Delay'     'Class2'     0.20906     0.20906    0.21667     0.9649
%    'Delay'     'Class3'     0.63412     0.63412          1    0.63412
%    'Queue1'    'Class1'    0.044719    0.026961    0.31515     0.1419
%    'Queue1'    'Class2'     0.80023     0.48245    0.82934     0.9649
%    'Queue1'    'Class3'     0.36588     0.21137    0.57699    0.63412
%AvgChainTable =
%  4x7 table
%    Station      Chain       Classes       QLen       Util       RespT      Tput
%    ________    ________    __________    _______    _______    _______    _______
%    'Delay'     'Chain1'    {1x2 cell}      1.155      1.155    0.48452     2.3839
%    'Delay'     'Chain2'    {1x1 cell}    0.63412    0.63412          1    0.63412
%    'Queue1'    'Chain1'    {1x2 cell}    0.84495    0.50941    0.35444     1.1068
%    'Queue1'    'Chain2'    {1x1 cell}    0.36588    0.21137    0.57699    0.63412
%AvgSysChainTable =
%  2x4 table
%     Chain       Classes      SysRespT    SysTput
%    ________    __________    ________    _______
%    'Chain1'    {1x2 cell}    0.83897      2.3839
%    'Chain2'    {1x1 cell}      1.577     0.63412
%SOLVER: SolverFluid
%Fluid analysis completed in 0.059826 sec [1 iterations]
%AvgTable =
%  6x6 table
%    Station         Class     QLen        Util       RespT      Tput
%    ________    ________    ________    ________    _______    ______
%    'Delay'     'Class1'      1.1367      1.1367    0.66667     1.705
%    'Delay'     'Class2'     0.25121     0.25121    0.21667    1.1594
%    'Delay'     'Class3'        0.75        0.75          1      0.75
%    'Queue1'    'Class1'    0.032396    0.032396       0.19    0.1705
%    'Queue1'    'Class2'     0.57971     0.57971        0.5    1.1594
%    'Queue1'    'Class3'        0.25        0.25    0.33333      0.75
%AvgChainTable =
%  4x7 table
%    Station      Chain       Classes       QLen       Util       RespT      Tput
%    ________    ________    __________    _______    _______    _______    ______
%    'Delay'     'Chain1'    {1x2 cell}     1.3879     1.3879    0.48452    2.8645
%    'Delay'     'Chain2'    {1x1 cell}       0.75       0.75          1      0.75
%    'Queue1'    'Chain1'    {1x2 cell}    0.61211    0.61211    0.21369    1.3299
%    'Queue1'    'Chain2'    {1x1 cell}       0.25       0.25    0.33333      0.75
%AvgSysChainTable =
%  2x4 table
%     Chain       Classes      SysRespT    SysTput
%    ________    __________    ________    _______
%    'Chain1'    {1x2 cell}    0.69821     2.8645
%    'Chain2'    {1x1 cell}     1.3333       0.75
%SOLVER: SolverMVA
%MVA analysis completed in 0.029756 sec
%AvgTable =
%  6x6 table
%    Station      Class       QLen        Util       RespT      Tput
%    ________    _________   ________    ________    _______    _______
%    'Delay'     'Class1'     0.90548     0.90548    0.66667     1.3582
%    'Delay'     'Class2'     0.20011     0.20011    0.21667    0.92359
%    'Delay'     'Class3'     0.61295     0.61295          1    0.61295
%    'Queue1'    'Class1'    0.047336    0.025806    0.34851    0.13582
%    'Queue1'    'Class2'     0.84707      0.4618    0.91714    0.92359
%    'Queue1'    'Class3'     0.38705     0.20432    0.63147    0.61295
%AvgChainTable =
%  4x7 table
%    Station      Chain       Classes       QLen       Util       RespT      Tput
%    ________    ________    __________    _______    _______    _______    _______
%    'Delay'     'Chain1'    {1x2 cell}     1.1056     1.1056    0.48452     2.2818
%    'Delay'     'Chain2'    {1x1 cell}    0.61295    0.61295          1    0.61295
%    'Queue1'    'Chain1'    {1x2 cell}     0.8944     0.4876    0.39197     1.0594
%    'Queue1'    'Chain2'    {1x1 cell}    0.38705    0.20432    0.63147    0.61295
%AvgSysChainTable =
%  2x4 table
%     Chain       Classes      SysRespT    SysTput
%    ________    __________    ________    _______
%    'Chain1'    {1x2 cell}    0.87649      2.2818
%    'Chain2'    {1x1 cell}     1.6315     0.61295
%SOLVER: SolverNC
%NC analysis completed in 0.044545 sec
%AvgTable =
%  6x6 table
%    Station      Class        QLen       Util        RespT       Tput
%    ________    ________    ________    _______    _________    _______
%    'Delay'     'Class1'      252.34     252.34      0.66667     378.51
%    'Delay'     'Class2'      55.766     55.766      0.21667     257.38
%    'Delay'     'Class3'     0.63412    0.63412            1    0.63412
%    'Queue1'    'Class1'    0.044719     7.1916    0.0011815     37.851
%    'Queue1'    'Class2'     0.80023     128.69    0.0031091     257.38
%    'Queue1'    'Class3'     0.36588    0.21137      0.57699    0.63412
%AvgChainTable =
%  4x7 table
%    Station      Chain       Classes       QLen       Util        RespT       Tput
%    ________    ________    __________    _______    _______    _________    _______
%    'Delay'     'Chain1'    {1x2 cell}      308.1      308.1      0.48452     635.89
%    'Delay'     'Chain2'    {1x1 cell}    0.63412    0.63412            1    0.63412
%    'Queue1'    'Chain1'    {1x2 cell}    0.84495     135.88    0.0013288     295.23
%    'Queue1'    'Chain2'    {1x1 cell}    0.36588    0.21137      0.57699    0.63412
%AvgSysChainTable =
%  2x4 table
%     Chain       Classes      SysRespT     SysTput
%    ________    __________    _________    _______
%    'Chain1'    {1x2 cell}    0.0031452     635.89
%    'Chain2'    {1x1 cell}        1.577    0.63412
%\end{lstlisting}
